<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {# The title block can be overridden by child templates #}
    <title>{% block title %}Fabricio Mendoza{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('pygments_css') }}">

    <!-- Google tag (gtag.js) - Replace G-XXXXXXXXXX with your Measurement ID -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1E599ESVL3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-1E599ESVL3');
    </script>

</head>
<body>

    <header class="primary-header">
        <a href="{{ url_for('index', lang=lang) }}" class="nav-logo">Fabricio Mendoza</a>

        <button class="mobile-nav-toggle" aria-controls="primary-navigation" aria-expanded="false">
            <span class="sr-only">Menu</span>
        </button>

        <nav>
            <ul id="primary-navigation" class="primary-navigation" data-visible="false">
                <li><a class="nav-link" href="{{ url_for('index', lang=lang) }}#about">{% if lang == 'en' %}About{% else %}Sobre Mí{% endif %}</a></li>
                <li><a class="nav-link" href="{{ url_for('index', lang=lang) }}#education">{% if lang == 'en' %}Education{% else %}Educación{% endif %}</a></li>
                <li><a class="nav-link" href="{{ url_for('index', lang=lang) }}#experience">{% if lang == 'en' %}Experience{% else %}Experiencia{% endif %}</a></li>
                <li><a class="nav-link" href="{{ url_for('index', lang=lang) }}#projects">{% if lang == 'en' %}Projects{% else %}Proyectos{% endif %}</a></li>
                <li><a class="nav-link" href="{{ url_for('index', lang=lang) }}#publications">{% if lang == 'en' %}Publications{% else %}Publicaciones{% endif %}</a></li>
                <li><a class="nav-link" href="{{ url_for('index', lang=lang) }}#news">{% if lang == 'en' %}News{% else %}Noticias{% endif %}</a></li>
                <li><a class="nav-link" href="{{ url_for('index', lang=lang) }}#contact">{% if lang == 'en' %}Contact{% else %}Contacto{% endif %}</a></li>
                <li class="language-switcher">
                {% if lang == 'en' %}
                    <a class="language-toggle" href="{{ url_for('set_language', lang='es') }}">ES</a>
                {% else %}
                    <a class="language-toggle" href="{{ url_for('set_language', lang='en') }}">EN</a>
                {% endif %}
                </li>
            </ul>
        </nav>
    </header>

    <main>
        {% block content %}{% endblock %}
    </main>

    {# Modal for success messages #}
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% for category, message in messages %}
            {% if category == 'success' %}
            <div id="success-modal" class="modal-overlay">
                <div class="modal-box">
                    <h3>Success!</h3>
                    <p>{{ message }}</p>
                    <button id="modal-close-btn" class="modal-button">OK</button>
                </div>
            </div>
            {% endif %}
        {% endfor %}
    {% endwith %}


    <footer>
        <p>&copy; {{ now.year }} Fabricio Mendoza. All rights reserved.</p>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>