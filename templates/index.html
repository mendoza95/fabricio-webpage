{% extends "base.html" %}

{% block title %}{{ home.title }}{% endblock %}

{% block content %}
    {# Home Section #}
    <section id="home">
        <h1>{{ home.title }}</h1>
        <p>{{ home.subtitle }}</p>
        <a href="#{{ home.button_url_key }}">{{ home.button_text }}</a>
    </section>

    {# About Section #}
    <section id="about">
        <h2>{{ about.title }}</h2>
        <p>{{ about.intro }}</p>
        <p>{{ about.details }}</p>
        <a href="{{ url_for('static', filename=about.cv_filename) }}" download>{{ about.cv_button }}</a>
    </section>

    {# Education Section #}
    <section id="education">
        <h2>{{ ui_text.education_title }}</h2>
        <div class="education-container">
            {% for item in education %}
            <div class="education-item">
                <div class="card-content">
                    <h4>{{ item.degree }}</h4>
                    <h5><a href="{{ item.institution_url }}" target="_blank">{{ item.institution }}</a> ({{ item.start_year }} - {{ item.end_year }})</h5>
                    <p><em>{{ item.location }}</em></p>
                    <p>{{ item.description }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    {# Work Experience Section #}
    <section id="experience">
        <h2>{{ ui_text.experience_title }}</h2>
        <div class="experience-container">
            {% for job in experience %}
            <div class="experience-item">
                <div class="card-content">
                    <h4>{{ job.role }}</h4>
                    <h5><a href="{{ job.company_url }}" target="_blank">{{ job.company }}</a> ({{ job.start_date }} - {{ job.end_date }})</h5>
                    <p><em>{{ job.location }}</em></p>
                    <p>{{ job.description }}</p>
                </div>
            </div>
            {% else %}
            <p>{{ ui_text.no_experience_message }}</p>
            {% endfor %}
        </div>
    </section>

    {# Projects Section #}
    <section id="projects">
        <h2>{{ ui_text.projects_title }}</h2>
        <div class="projects-container">
            {% for project in projects %}
            <div class="project-card" id="{{ project.id }}">
                <h3>{{ project.name }}</h3>
                <p>{{ project.description }}</p>
                <p><strong>{{ ui_text.technologies_label }}:</strong> {{ project.technologies | join(', ') }}</p>
                {% if project.live_url %}
                    <a href="{{ project.live_url }}" target="_blank">{{ ui_text.live_demo_button }}</a>
                {% endif %}
                <a href="{{ project.repo_url }}" target="_blank">{{ ui_text.github_repo_button }}</a>
            </div>
            {% endfor %}
        </div>
    </section>

    {# Publications Section #}
    <section id="publications">
        <h2>{{ ui_text.publications_title }}</h2>
        <div class="publications-container">
            {% for pub in publications %}
            <div class="publication-item">
                <h4><a href="{{ pub.url }}" target="_blank">{{ pub.title }}</a></h4>
                <p><em>{{ pub.authors }}</em></p>
                <p><strong>{{ pub.journal }}</strong> ({{ pub.year }})</p>
                <p>{{ pub.description }}</p>
            </div>
            {% else %}
            <p>{{ ui_text.no_publications_message }}</p>
            {% endfor %}
        </div>
    </section>

    {# Latest News Section #}
    <section id="news">
        <h2>{{ ui_text.news_title }}</h2>
        <div class="posts-container">
            {% for post in latest_posts %}
            <div class="post-summary">
                <h3>{{ post.title }}</h3>
                <p class="post-meta">{{ ui_text.published_on_prefix }} {{ post.meta.date.strftime(ui_text.date_format) }}</p>
                <div class="post-content">{{ post.html | safe }}</div>
            </div>
            {% else %}
            <p>{{ ui_text.no_news_message }}</p>
            {% endfor %}
        </div>
        <p style="text-align: center; margin-top: 2rem;">
            <a href="{{ url_for('blog', lang=lang) }}" target="_blank" rel="noopener noreferrer">{{ ui_text.view_all_posts_button }}</a>
        </p>
    </section>

    {# Contact Section #}
    <section id="contact">
        <h2>{{ ui_text.contact_title }}</h2>

        <div class="contact-layout-container">
            <div class="contact-form-wrapper">
                {# Flash messages are now handled by the modal in base.html #}
                <form method="POST" action="{{ url_for('index', lang=lang) }}">
                    {{ form.hidden_tag() }}
                    <p>{{ form.name.label }}<br>{{ form.name(size=30) }}</p>
                    <p>{{ form.email.label }}<br>{{ form.email(size=30) }}</p>
                    <p>{{ form.message.label }}<br>{{ form.message(rows=5, cols=30) }}</p>
                    <p>{{ form.submit() }}</p>
                </form>
            </div>

            <div class="social-contact-container">
                {% for link in social_links %}
                <a href="{{ link.url }}" class="social-contact-link" target="_blank" rel="noopener noreferrer">
                    <div class="social-icon">{{ link.icon_svg | safe }}</div>
                    <span>{{ link.username }}</span>
                </a>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}